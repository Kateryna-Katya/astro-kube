{"version":3,"file":"main-DUhyD4xG.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * ASTRO-KUBE.BLOG - Официальный скрипт платформы (2026)\n * Весь функционал в одном файле:\n * 1. Навигация и Мобильное меню\n * 2. Анимации при скролле (Intersection Observer)\n * 3. Интерактивные табы (Преимущества)\n * 4. Прогресс-линия \"Стрим\" (Инновации)\n * 5. Контактная форма (Валидация + Капча)\n * 6. Cookie Popup\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    \n    // --- 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 2. ХЕДЕР И МОБИЛЬНОЕ МЕНЮ ---\n    const header = document.getElementById('header');\n    const burger = document.getElementById('burger-menu');\n    const navMenu = document.getElementById('nav-menu');\n    const body = document.body;\n    const navLinks = document.querySelectorAll('.nav__link');\n\n    // Эффект при скролле (прозрачность хедера)\n    window.addEventListener('scroll', () => {\n        if (window.scrollY > 50) {\n            header.classList.add('header--scrolled');\n        } else {\n            header.classList.remove('header--scrolled');\n        }\n    });\n\n    // Бургер-меню\n    if (burger) {\n        burger.addEventListener('click', () => {\n            burger.classList.toggle('active');\n            navMenu.classList.toggle('active');\n            body.classList.toggle('no-scroll');\n        });\n    }\n\n    // Плавный скролл и закрытие меню при клике на ссылку\n    document.querySelectorAll('a[href^=\"#\"]').forEach(anchor => {\n        anchor.addEventListener('click', function (e) {\n            e.preventDefault();\n            const targetId = this.getAttribute('href');\n            if (targetId === '#') return;\n            \n            const targetElement = document.querySelector(targetId);\n            if (targetElement) {\n                // Закрываем мобильное меню если оно открыто\n                burger.classList.remove('active');\n                navMenu.classList.remove('active');\n                body.classList.remove('no-scroll');\n\n                // Плавная прокрутка\n                window.scrollTo({\n                    top: targetElement.offsetTop - 80,\n                    behavior: 'smooth'\n                });\n            }\n        });\n    });\n\n    // --- 3. АНИМАЦИИ ПОЯВЛЕНИЯ (Intersection Observer) ---\n    const observerOptions = { threshold: 0.15 };\n    const revealObserver = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting) {\n                entry.target.classList.add('reveal--active');\n            }\n        });\n    }, observerOptions);\n\n    document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));\n\n    // --- 4. ИНТЕРАКТИВНЫЕ ВКЛАДКИ ---\n    const tabButtons = document.querySelectorAll('.tabs__btn');\n    const tabPanels = document.querySelectorAll('.tabs__panel');\n\n    tabButtons.forEach(btn => {\n        btn.addEventListener('click', () => {\n            const target = btn.dataset.tab;\n            \n            tabButtons.forEach(b => b.classList.remove('active'));\n            tabPanels.forEach(p => p.classList.remove('active'));\n            \n            btn.classList.add('active');\n            const targetPanel = document.getElementById(target);\n            if (targetPanel) {\n                targetPanel.classList.add('active');\n                if (typeof lucide !== 'undefined') lucide.createIcons(); // Перерисовываем иконки\n            }\n        });\n    });\n\n    // --- 5. ПРОГРЕСС-ЛИНИЯ В СЕКЦИИ \"ИННОВАЦИОННЫЙ СТРИМ\" ---\n    const streamSection = document.querySelector('.stream');\n    const progressLine = document.getElementById('stream-progress');\n    \n    if (streamSection && progressLine) {\n        window.addEventListener('scroll', () => {\n            const sectionRect = streamSection.getBoundingClientRect();\n            const sectionHeight = streamSection.offsetHeight;\n            \n            // Расчет процента заполнения линии в зависимости от положения на экране\n            let scrollPercent = ((window.innerHeight - sectionRect.top) / (sectionHeight + window.innerHeight)) * 100;\n            scrollPercent = Math.min(Math.max(scrollPercent, 0), 100);\n            \n            progressLine.style.height = `${scrollPercent}%`;\n        });\n    }\n\n    // --- 6. КОНТАКТНАЯ ФОРМА (Валидация + Капча) ---\n    const contactForm = document.getElementById('main-form');\n    const successMessage = document.getElementById('form-success');\n    const phoneInput = document.getElementById('phone-input');\n    const captchaQ = document.getElementById('captcha-question');\n    const captchaA = document.getElementById('captcha-answer');\n    let captchaResult;\n\n    // Генерация математической капчи\n    function generateCaptcha() {\n        if (!captchaQ) return;\n        const a = Math.floor(Math.random() * 10) + 1;\n        const b = Math.floor(Math.random() * 10) + 1;\n        captchaResult = a + b;\n        captchaQ.innerText = `${a} + ${b}`;\n    }\n\n    // Валидация телефона: только цифры и знак плюс\n    if (phoneInput) {\n        phoneInput.addEventListener('input', (e) => {\n            e.target.value = e.target.value.replace(/[^0-9+]/g, '');\n        });\n    }\n\n    if (contactForm) {\n        generateCaptcha();\n        \n        contactForm.addEventListener('submit', function(e) {\n            e.preventDefault();\n            \n            // Проверка капчи\n            if (parseInt(captchaA.value) !== captchaResult) {\n                alert('Неправильный ответ капчи! Пожалуйста, решите пример снова.');\n                generateCaptcha();\n                captchaA.value = '';\n                return;\n            }\n\n            const btn = document.getElementById('submit-btn');\n            btn.classList.add('btn--loading');\n            btn.innerHTML = '<span>Отправка...</span>';\n\n            // Имитация AJAX-запроса\n            setTimeout(() => {\n                contactForm.style.display = 'none';\n                successMessage.style.display = 'flex';\n                btn.classList.remove('btn--loading');\n            }, 1500);\n        });\n    }\n\n    // Глобальная функция сброса формы (для кнопки \"Отправить еще раз\")\n    window.resetForm = () => {\n        contactForm.reset();\n        contactForm.style.display = 'block';\n        successMessage.style.display = 'none';\n        generateCaptcha();\n    };\n\n    // --- 7. COOKIE POPUP ---\n    const cookiePopup = document.getElementById('cookie-popup');\n    const cookieAccept = document.getElementById('cookie-accept');\n\n    if (cookiePopup && cookieAccept) {\n        // Показываем плашку только если согласие еще не дано\n        if (!localStorage.getItem('astro_cookie_accepted')) {\n            setTimeout(() => {\n                cookiePopup.classList.add('cookie-popup--active');\n            }, 2000);\n        }\n\n        cookieAccept.addEventListener('click', () => {\n            localStorage.setItem('astro_cookie_accepted', 'true');\n            cookiePopup.classList.remove('cookie-popup--active');\n        });\n    }\n});"],"names":["header","burger","navMenu","body","anchor","e","targetId","targetElement","observerOptions","revealObserver","entries","entry","el","tabButtons","tabPanels","btn","target","b","p","targetPanel","streamSection","progressLine","sectionRect","sectionHeight","scrollPercent","contactForm","successMessage","phoneInput","captchaQ","captchaA","captchaResult","generateCaptcha","a","cookiePopup","cookieAccept"],"mappings":"ssBAWA,SAAS,iBAAiB,mBAAoB,IAAM,CAG5C,OAAO,OAAW,KAClB,OAAO,YAAa,EAIxB,MAAMA,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAS,SAAS,eAAe,aAAa,EAC9CC,EAAU,SAAS,eAAe,UAAU,EAC5CC,EAAO,SAAS,KACL,SAAS,iBAAiB,YAAY,EAGvD,OAAO,iBAAiB,SAAU,IAAM,CAChC,OAAO,QAAU,GACjBH,EAAO,UAAU,IAAI,kBAAkB,EAEvCA,EAAO,UAAU,OAAO,kBAAkB,CAEtD,CAAK,EAGGC,GACAA,EAAO,iBAAiB,QAAS,IAAM,CACnCA,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAK,UAAU,OAAO,WAAW,CAC7C,CAAS,EAIL,SAAS,iBAAiB,cAAc,EAAE,QAAQC,GAAU,CACxDA,EAAO,iBAAiB,QAAS,SAAUC,EAAG,CAC1CA,EAAE,eAAgB,EAClB,MAAMC,EAAW,KAAK,aAAa,MAAM,EACzC,GAAIA,IAAa,IAAK,OAEtB,MAAMC,EAAgB,SAAS,cAAcD,CAAQ,EACjDC,IAEAN,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAK,UAAU,OAAO,WAAW,EAGjC,OAAO,SAAS,CACZ,IAAKI,EAAc,UAAY,GAC/B,SAAU,QAC9B,CAAiB,EAEjB,CAAS,CACT,CAAK,EAGD,MAAMC,EAAkB,CAAE,UAAW,GAAM,EACrCC,EAAiB,IAAI,qBAAsBC,GAAY,CACzDA,EAAQ,QAAQC,GAAS,CACjBA,EAAM,gBACNA,EAAM,OAAO,UAAU,IAAI,gBAAgB,CAE3D,CAAS,CACJ,EAAEH,CAAe,EAElB,SAAS,iBAAiB,SAAS,EAAE,QAAQI,GAAMH,EAAe,QAAQG,CAAE,CAAC,EAG7E,MAAMC,EAAa,SAAS,iBAAiB,YAAY,EACnDC,EAAY,SAAS,iBAAiB,cAAc,EAE1DD,EAAW,QAAQE,GAAO,CACtBA,EAAI,iBAAiB,QAAS,IAAM,CAChC,MAAMC,EAASD,EAAI,QAAQ,IAE3BF,EAAW,QAAQI,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EACpDH,EAAU,QAAQI,GAAKA,EAAE,UAAU,OAAO,QAAQ,CAAC,EAEnDH,EAAI,UAAU,IAAI,QAAQ,EAC1B,MAAMI,EAAc,SAAS,eAAeH,CAAM,EAC9CG,IACAA,EAAY,UAAU,IAAI,QAAQ,EAC9B,OAAO,OAAW,KAAa,OAAO,YAAW,EAErE,CAAS,CACT,CAAK,EAGD,MAAMC,EAAgB,SAAS,cAAc,SAAS,EAChDC,EAAe,SAAS,eAAe,iBAAiB,EAE1DD,GAAiBC,GACjB,OAAO,iBAAiB,SAAU,IAAM,CACpC,MAAMC,EAAcF,EAAc,sBAAuB,EACnDG,EAAgBH,EAAc,aAGpC,IAAII,GAAkB,OAAO,YAAcF,EAAY,MAAQC,EAAgB,OAAO,aAAgB,IACtGC,EAAgB,KAAK,IAAI,KAAK,IAAIA,EAAe,CAAC,EAAG,GAAG,EAExDH,EAAa,MAAM,OAAS,GAAGG,CAAa,GACxD,CAAS,EAIL,MAAMC,EAAc,SAAS,eAAe,WAAW,EACjDC,EAAiB,SAAS,eAAe,cAAc,EACvDC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAW,SAAS,eAAe,kBAAkB,EACrDC,EAAW,SAAS,eAAe,gBAAgB,EACzD,IAAIC,EAGJ,SAASC,GAAkB,CACvB,GAAI,CAACH,EAAU,OACf,MAAMI,EAAI,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EACrCf,EAAI,KAAK,MAAM,KAAK,OAAQ,EAAG,EAAE,EAAI,EAC3Ca,EAAgBE,EAAIf,EACpBW,EAAS,UAAY,GAAGI,CAAC,MAAMf,CAAC,EACxC,CAGQU,GACAA,EAAW,iBAAiB,QAAU,GAAM,CACxC,EAAE,OAAO,MAAQ,EAAE,OAAO,MAAM,QAAQ,WAAY,EAAE,CAClE,CAAS,EAGDF,IACAM,EAAiB,EAEjBN,EAAY,iBAAiB,SAAU,SAAS,EAAG,CAI/C,GAHA,EAAE,eAAgB,EAGd,SAASI,EAAS,KAAK,IAAMC,EAAe,CAC5C,MAAM,4DAA4D,EAClEC,EAAiB,EACjBF,EAAS,MAAQ,GACjB,MAChB,CAEY,MAAMd,EAAM,SAAS,eAAe,YAAY,EAChDA,EAAI,UAAU,IAAI,cAAc,EAChCA,EAAI,UAAY,2BAGhB,WAAW,IAAM,CACbU,EAAY,MAAM,QAAU,OAC5BC,EAAe,MAAM,QAAU,OAC/BX,EAAI,UAAU,OAAO,cAAc,CACtC,EAAE,IAAI,CACnB,CAAS,GAIL,OAAO,UAAY,IAAM,CACrBU,EAAY,MAAO,EACnBA,EAAY,MAAM,QAAU,QAC5BC,EAAe,MAAM,QAAU,OAC/BK,EAAiB,CACpB,EAGD,MAAME,EAAc,SAAS,eAAe,cAAc,EACpDC,EAAe,SAAS,eAAe,eAAe,EAExDD,GAAeC,IAEV,aAAa,QAAQ,uBAAuB,GAC7C,WAAW,IAAM,CACbD,EAAY,UAAU,IAAI,sBAAsB,CACnD,EAAE,GAAI,EAGXC,EAAa,iBAAiB,QAAS,IAAM,CACzC,aAAa,QAAQ,wBAAyB,MAAM,EACpDD,EAAY,UAAU,OAAO,sBAAsB,CAC/D,CAAS,EAET,CAAC"}